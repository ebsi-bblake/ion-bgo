import{_ as e,r as a,m as t,n,o,c as s,w as i,u as l,a as c,b as d,I as r,e as u,t as m,p,f as h,g as v}from"./index-CBreiGDI.js";let w,f;const g=async(e,a,t)=>{await(async()=>{window.Pose&&window.Camera||await new Promise((e=>{const a=document.createElement("script");a.src="https://cdn.jsdelivr.net/npm/@mediapipe/pose";const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils",a.onload=()=>{t.onload=()=>{w=window.Pose,f=window.Camera,e()}},document.body.appendChild(a),document.body.appendChild(t)}))})();const n=new w({locateFile:e=>"https://cdn.jsdelivr.net/npm/@mediapipe/pose/".concat(e)});n.setOptions({modelComplexity:1,smoothLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),n.onResults(t);new f(e,{onFrame:async()=>{await n.send({image:e})},width:1280,height:720}).start()},y=e=>{if(e&&e.srcObject){e.srcObject.getTracks().forEach((e=>e.stop())),e.srcObject=null}},k={class:"action-buttons"},C=e({__name:"PoseViewerPage",setup(e){const w=a("Pre"),f=a(null),C=a(null),_=e=>{const a=C.value.getContext("2d");var t,n,o,s;a.clearRect(0,0,f.value.videoWidth,f.value.videoHeight),a.drawImage(e.image,0,0,C.value.width,C.value.height),console.log(window),console.log(e),e.poseLandmarks&&(t=a,n=e.poseLandmarks,o=window.POSE_CONNECTIONS,s={color:"white",lineWidth:2},t.strokeStyle=s.color,t.lineWidth=s.lineWidth,o.forEach((([e,a])=>{const o=n[e],s=n[a];o&&s&&(t.beginPath(),t.moveTo(o.x*t.canvas.width,o.y*t.canvas.height),t.lineTo(s.x*t.canvas.width,s.y*t.canvas.height),t.stroke())})),((e,a,t)=>{e.fillStyle=t.color,a.forEach((a=>{e.beginPath(),e.arc(a.x*e.canvas.width,a.y*e.canvas.height,t.lineWidth,0,2*Math.PI),e.fill()}))})(a,e.poseLandmarks,{color:"red",lineWidth:2}))},P=async()=>{await g(f.value,C.value,_),w.value="Streaming"};return t((()=>{P()})),n((()=>{y(f.value)})),(e,a)=>(o(),s(l(v),null,{default:i((()=>[c(l(h),null,{default:i((()=>[d("video",{ref_key:"videoRef",ref:f,id:"videoSource",playsinline:"",autoplay:"",muted:"",style:{display:"none"}},null,512),d("canvas",{ref_key:"canvasRef",ref:C,id:"outputCanvas"},null,512),d("div",k,[c(l(r),{onClick:P},{default:i((()=>[u(m("Pre"===w.value?"Start Pose Detection":"Retake"),1)])),_:1}),"Streaming"===w.value?(o(),s(l(r),{key:0,onClick:l(y)},{default:i((()=>a[0]||(a[0]=[u(" Stop ")]))),_:1},8,["onClick"])):p("",!0)])])),_:1})])),_:1}))}},[["__scopeId","data-v-2f33b898"]]);export{C as default};
